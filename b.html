<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Telegram Browser Detection</title>
</head>
<body>
    <h1>Telegram Browser Detection</h1>
    <p id="status"></p>

    <script>
        async function isTelegramWebApp() {
            // 1. Check for Telegram-specific objects
            const hasTelegramProxy = typeof window.TelegramWebviewProxy !== 'undefined';

            // 2. Check for specific launch parameters (if applicable)
            const urlParams = new URLSearchParams(window.location.search);
            const hasTelegramParams = urlParams.has('telegram') || urlParams.has('tg_webapp');

            // 3. Attempt to call a Telegram-specific method
            let canRequestTheme = false;
            if (typeof window.TelegramWebviewProxy !== 'undefined') {
                try {
                    await window.TelegramWebviewProxy.webAppRequestTheme({ timeout: 100 });
                    canRequestTheme = true;
                } catch (e) {
                    canRequestTheme = false;
                }
            }

            // 4. Combine all checks
            return hasTelegramProxy || hasTelegramParams || canRequestTheme;
        }

        (async () => {
            const statusElement = document.getElementById('status');
            if (await isTelegramWebApp()) {
                statusElement.textContent = "⚠️ You are using Telegram's in-app browser!";
                // Optional: Prompt the user to open in a regular browser
                // For example:
                // alert("For the best experience, please open this link in your default browser.");
            } else {
                statusElement.textContent = "✅ You are not using Telegram's in-app browser.";
            }
        })();
    </script>
</body>
</html>
